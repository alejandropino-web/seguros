<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>4 pasos para saber cómo y cuánto puede ganar con seguros - WiseTech Global</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <style>
    body {background: #f4f6f9; font-family: 'Segoe UI', sans-serif;}
    .card {border-radius: 14px; border: none; box-shadow: 0 4px 10px rgba(0,0,0,0.08);} 
    .input-yellow {background: linear-gradient(180deg,#fffbe6,#fff5c2);} 
    .monetario {font-variant-numeric: tabular-nums; font-weight: 500;}
    .small-muted {font-size: .9rem; color: #6b7280;}
    .wisetech-header {color: #004085; font-weight: 600;}
    .highlight-result {background-color: #004085; color: #fff; font-size: 1.2rem; font-weight: 700; border-radius: 10px; text-align: center; padding: 10px;}
    .btn-primary {background-color: #004085; border: none;}
    .btn-primary:hover {background-color: #0056b3;}
  </style>
</head>
<body>
<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-lg-9">
      <div class="card shadow-sm">
        <div class="card-body">
          <h3 class="wisetech-header mb-1">4 pasos para saber cómo y cuánto puede ganar con seguros</h3>
          <p class="small-muted">Herramienta basada en el modelo EcuaSIGAD. Las celdas en amarillo son editables.</p>

          <hr>
          <form id="calcForm" class="row gy-3">
            <div class="col-12"><strong>Paso 1 — Valores base</strong></div>
            <div class="col-md-6">
              <label class="form-label">Indicar valor de la mercancía (USD)</label>
              <input type="number" step="0.01" id="C4" class="form-control input-yellow" value="1000" min="0">
              <div class="form-text">Ingrese el valor FOB en dólares estadounidenses.</div>
            </div>
            <div class="col-md-6">
              <label class="form-label">Indicar valor del Flete (USD)</label>
              <input type="number" step="0.01" id="C5" class="form-control input-yellow" value="200" min="0">
              <div class="form-text">Ingrese el costo de flete estimado en USD.</div>
            </div>

            <div class="col-12"><strong>Paso 2 — Tasas de seguro negociadas con el cliente</strong></div>
            <div class="col-md-6">
              <label class="form-label">Tasa NETA (%) que la agencia cobrará al cliente</label>
              <input type="number" step="0.0001" id="C6" class="form-control input-yellow" value="1.5" min="0.17">
              <div class="form-text text-danger d-none" id="rateWarning">La tasa no puede ser menor a 0.17%</div>
              <div class="form-text">Tasa porcentual (por ejemplo, 1.5 = 1.5%).</div>
            </div>

            <div class="col-12 mt-2"><strong>Resultados</strong></div>

            <div class="col-md-6">
              <label class="form-label">Monto asegurable CIF +15%</label>
              <div id="C8" class="form-control-plaintext border rounded p-2 bg-white monetario">$0.00</div>
            </div>

            <div class="col-md-6">
              <label class="form-label">Valor NETO del seguro al cliente</label>
              <div id="C9" class="form-control-plaintext border rounded p-2 bg-white monetario">$0.00</div>
            </div>
            <div class="col-md-6">
              <label class="form-label">¿Cuánto le costará este seguro a la Agencia?</label>
              <div id="C10" class="form-control-plaintext border rounded p-2 bg-white monetario">$0.00</div>
            </div>

            <div class="col-md-6">
              <label class="form-label">Ganancia de la agencia por este seguro</label>
              <div id="C11" class="form-control-plaintext border rounded p-2 bg-white monetario">$0.00</div>
            </div>
            <div class="col-md-6">
              <label class="form-label">Comisión efectiva</label>
              <div id="C12" class="form-control-plaintext border rounded p-2 bg-white">0 %</div>
            </div>

            <div class="col-12"><strong>Paso 4 — Volumen</strong></div>
            <div class="col-md-6">
              <label class="form-label">Trámites con seguros similares al mes</label>
              <input type="number" step="1" id="C14" class="form-control input-yellow" value="10" min="0">
              <div class="form-text">Número estimado de trámites por mes.</div>
            </div>
            <div class="col-md-6">
              <label class="form-label">Mi Agencia obtendría aprox. (mensual)</label>
              <div id="C15" class="highlight-result">$0.00</div>
            </div>

            <div class="col-12 text-end">
              <button type="button" id="resetBtn" class="btn btn-outline-secondary me-2">Restablecer</button>
            </div>

            <div class="col-12 text-center mt-4">
              <a href="https://wa.me/593995202570" target="_blank" class="btn btn-success m-2">Contactar a Walther Chaglia</a>
              <a href="https://wa.me/593992908787" target="_blank" class="btn btn-success m-2">Contactar a Fernando López</a>
            </div>
          </form>
          
        </div>
      </div>
    </div>
  </div>
</div>

<script>
function fmtUSD(n){
  if(isNaN(n) || !isFinite(n)) return '$0.00';
  return '$' + Number(n).toLocaleString('es-EC', {minimumFractionDigits:2, maximumFractionDigits:2});
}

function calcAll(){
  const C4 = Math.max(0, parseFloat($('#C4').val())||0);
  const C5 = Math.max(0, parseFloat($('#C5').val())||0);
  let C6 = Math.max(0.17, parseFloat($('#C6').val())||0);
  const C14 = Math.max(0, parseFloat($('#C14').val())||0);

  if(parseFloat($('#C6').val()) < 0.17){
    $('#rateWarning').removeClass('d-none');
    $('#C6').addClass('is-invalid');
    $('#C6').val(0.17);
  } else {
    $('#rateWarning').addClass('d-none');
    $('#C6').removeClass('is-invalid');
  }

  const C8 = (C4 + C5 + ((C4 + C5) * C6 / 100)) * 1.15;
  const C9 = (C8 * C6) / 100.0;
  const C10 = (C8 * 0.16) / 100.0;
  const C11 = C9 - C10;
  const C12 = (C9 === 0) ? 0 : (C11 / C9);
  const C15 = C11 * C14;

  $('#C8').text(fmtUSD(C8));
  $('#C9').text(fmtUSD(C9));
  $('#C10').text(fmtUSD(C10));
  $('#C11').text(fmtUSD(C11));
  $('#C12').text((C12*100).toFixed(2) + ' %');
  $('#C15').text(fmtUSD(C15));
}

$(function(){
  calcAll();
  $('#C4,#C5,#C6,#C14').on('input change', calcAll);

  $('#resetBtn').on('click', function(){
    $('#C4').val('50000');
    $('#C5').val('2000');
    $('#C6').val('0.20');
    $('#C14').val('15');
    calcAll();
  });

  $('#copyBtn').on('click', function(){
    navigator.clipboard.writeText(document.documentElement.outerHTML).then(() => {
      alert('Código HTML copiado. Pegue en un archivo .html para usarlo.');
    });
  });
});
</script>

</body>
</html>
